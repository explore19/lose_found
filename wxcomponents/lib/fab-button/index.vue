<template>
<uni-shadow-root class="lib-fab-button-index"><view :class="classes.backdrop" v-if="backdrop && buttonVisible"></view>
<view :class="'wux-class '+(classes.wrap)" @click.stop.prevent="onToggle">
	<view :class="classes.action" :hover-class="classes.hover">
		<image :class="classes.text" :src="action" v-if="action"></image>
		<slot name="action" v-else></slot>
	</view>
	<block v-for="(button,index) in (buttons)" :key="button.index">
		<button :class="classes.button[index].wrap" :data-index="index" :data-value="button" :data-label="button.label" :disabled="button.disabled" :open-type="button.openType" :hover-class="(!button.disabled ? classes.button[index].hover : 'none')" :hover-stop-propagation="button.hoverStopPropagation" :hover-start-time="button.hoverStartTime" :hover-stay-time="button.hoverStayTime" :lang="button.lang" @getuserinfo="bindgetuserinfo" :session-from="button.sessionFrom" :send-message-title="button.sendMessageTitle" :send-message-path="button.sendMessagePath" :send-message-img="button.sendMessageImg" :show-message-card="button.showMessageCard" @contact="bindcontact" @getphonenumber="bindgetphonenumber" :app-parameter="button.appParameter" @error="onError" @opensetting="bindopensetting" @click.stop.prevent="onTap" :style="buttonStyle[index]">
			<image :class="classes.icon" :src="button.icon"></image>
			<view :class="classes.label" v-if="button.label">{{ button.label }}</view>
		</button>
	</block>
</view></uni-shadow-root>
</template>

<script>

global['__wxRoute'] = 'lib/fab-button/index'
"use strict";var _baseComponent=_interopRequireDefault(require("../helpers/baseComponent")),_classNames5=_interopRequireDefault(require("../helpers/classNames"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var defaultAction="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAHdElNRQfhBAQLCR5MtjrbAAAAjUlEQVRo3u3ZMRKAIAxEUbDirp4nXnctFFDHBtDQ/O1Nnk6aHUMgZCBKMkmmNAtgOmL9M+IQQGVM95zljy8DAAAAAAAAAAAAAACALsDZcppSx7Q+WdtUvA5xffUtrjeA8/qQ21S9gc15/3Nfzw0M5O0G2kM5BQAAAAAAAAAAAAAAQGk33q0qZ/p/Q/JFdmei9usomnwIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE3LTA0LTA0VDExOjA5OjMwKzA4OjAw1U4c3wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNy0wNC0wNFQxMTowOTozMCswODowMKQTpGMAAAAASUVORK5CYII=",setTransform=function(t,e,a,n){var o=0<arguments.length&&void 0!==t?t:0,r=1<arguments.length&&void 0!==e?e:1,i=!(3<arguments.length&&void 0!==n)||n,c="transition-duration: ".concat(2<arguments.length&&void 0!==a?a:300,"ms"),s="transform: scale(".concat(r,") translate3d(").concat(i?o:0,"px, ").concat(i?0:o,"px, 0)");return"opacity: 1; ".concat(c,"; ").concat(s)};(0,_baseComponent.default)({properties:{prefixCls:{type:String,value:"wux-fab-button"},hoverClass:{type:String,value:"default"},theme:{type:String,value:"balanced"},position:{type:String,value:"bottomRight"},action:{type:String,value:defaultAction},actionRotate:{type:Boolean,value:!0},hideShadow:{type:Boolean,value:!1},backdrop:{type:Boolean,value:!1},buttons:{type:Array,value:[],observer:"forceUpdateButtonStyle"},direction:{type:String,value:"horizontal",observer:"forceUpdateButtonStyle"},spaceBetween:{type:Number,value:10,observer:"forceUpdateButtonStyle"},duration:{type:Number,value:300},scale:{type:Number,value:.9,observer:"forceUpdateButtonStyle"},reverse:{type:Boolean,value:!1,observer:"forceUpdateButtonStyle"},sAngle:{type:Number,value:0,observer:"forceUpdateButtonStyle"},eAngle:{type:Number,value:360,observer:"forceUpdateButtonStyle"},defaultVisible:{type:Boolean,value:!1},visible:{type:Boolean,value:!1,observer:function(t){this.data.controlled&&this.updated(t)}},controlled:{type:Boolean,value:!1}},data:{buttonStyle:[],buttonVisible:!1},computed:{classes:["prefixCls, position, theme, direction, reverse, buttonVisible, hideShadow, actionRotate, buttons, hoverClass",function(a,t,e,n,o,r,i,c,s,l){var u;return{wrap:(0,_classNames5.default)(a,(_defineProperty(u={},"".concat(a,"--").concat(t),t),_defineProperty(u,"".concat(a,"--").concat(e),e),_defineProperty(u,"".concat(a,"--").concat(n),n),_defineProperty(u,"".concat(a,"--reverse"),o),_defineProperty(u,"".concat(a,"--opened"),r),u)),action:(0,_classNames5.default)("".concat(a,"__action"),_defineProperty({},"".concat(a,"__action--hide-shadow"),i)),text:(0,_classNames5.default)("".concat(a,"__text"),_defineProperty({},"".concat(a,"__text--rotate"),r&&c)),button:s.map(function(t){var e;return{wrap:(0,_classNames5.default)("".concat(a,"__button"),(_defineProperty(e={},"".concat(a,"__button--hide-shadow"),t.hideShadow),_defineProperty(e,"".concat(a,"__button--disabled"),t.disabled),_defineProperty(e,"".concat(t.className),t.className),e)),hover:t.hoverClass&&"default"!==t.hoverClass?t.hoverClass:"".concat(a,"__button--hover")}}),icon:"".concat(a,"__icon"),label:"".concat(a,"__label"),backdrop:"".concat(a,"__backdrop"),hover:l&&"default"!==l?l:"".concat(a,"--hover")}}]},methods:{updated:function(t){this.data.buttonVisible!==t&&(this.setData({buttonVisible:t}),this.updateButtonStyle(!t))},onChange:function(t){this.data.controlled||this.updated(t),this.triggerEvent("change",{value:t})},onToggle:function(){this.onChange(!this.data.buttonVisible)},onTap:function(t){var e=t.currentTarget.dataset,a=e.index,n=e.value,o={index:a,value:n,buttons:this.data.buttons};n.disabled||(this.triggerEvent("click",o),this.onChange(!1))},getRect:function(t,a){var n=this;return new Promise(function(e){wx.createSelectorQuery().in(n)[a?"selectAll":"select"](t).boundingClientRect(function(t){a&&Array.isArray(t)&&t.length&&e(t),!a&&t&&e(t)}).exec()})},forceUpdateButtonStyle:function(){this.updateButtonStyle(!this.data.buttonVisible)},updateButtonStyle:function(t){var n=this,e=this.data,a=e.prefixCls,r=e.buttons,i=e.duration,c=e.direction,s=e.spaceBetween,l=e.scale,u=[],d=this.data.reverse?1:-1,A="horizontal"===c;if(t)return r.forEach(function(){u.push("opacity: 0; transform: translate3d(0, 0, 0)")}),void(this.data.buttonStyle!==u&&this.setData({buttonStyle:u}));this.getRect(".".concat(a,"__action")).then(function(o){switch(c){case"horizontal":case"vertical":r.forEach(function(t,e){var a="".concat(d*(o.width+s)*(e+1)),n=setTransform(a,l,i,A);u.push(n)});break;case"circle":var a=o.width+s;r.forEach(function(t,e){u.push(n.getCircleStyle(e,a))})}n.data.buttonStyle!==u&&n.setData({buttonStyle:u})})},getCircleStyle:function(t,e){var a=this.data,n=a.sAngle,o=a.eAngle,r=a.duration,i=a.scale,c=this.data.buttons.length,s=Math.max,l=Math.sin,u=Math.cos,d=Math.PI,A=n*d/180,p=o*d/180,f=A+(p-A)/(p%(2*d)==0?c:s(1,c-1))*t,b=l(f)*e,h=u(f)*e;b=parseFloat(b.toFixed(6)),h=parseFloat(h.toFixed(6));var v="transform: scale(".concat(i,") translate3d(").concat(b,"px, ").concat(h,"px, 0)");return"opacity: 1; transition-duration: ".concat(r,"ms; ").concat(v)},bindgetuserinfo:function(t){this.triggerEvent("getuserinfo",_objectSpread({},t.detail,{},t.currentTarget.dataset))},bindcontact:function(t){this.triggerEvent("contact",_objectSpread({},t.detail,{},t.currentTarget.dataset))},bindgetphonenumber:function(t){this.triggerEvent("getphonenumber",_objectSpread({},t.detail,{},t.currentTarget.dataset))},bindopensetting:function(t){this.triggerEvent("opensetting",_objectSpread({},t.detail,{},t.currentTarget.dataset))},onError:function(t){this.triggerEvent("error",_objectSpread({},t.detail,{},t.currentTarget.dataset))}},ready:function(){var t=this.data,e=t.defaultVisible,a=t.visible,n=t.controlled?a:e;this.updated(n)}});
export default global['__wxComponents']['lib/fab-button/index']
</script>
<style platform="mp-weixin">
.wux-fab-button{position:fixed;z-index:1020}.wux-fab-button--center{left:50%;top:50%;transform:translate3d(-50%,-50%,0)}.wux-fab-button--topLeft{left:30rpx;top:30rpx}.wux-fab-button--topRight{right:30rpx;top:30rpx}.wux-fab-button--bottomLeft{left:30rpx;bottom:30rpx}.wux-fab-button--bottomRight{right:30rpx;bottom:30rpx}.wux-fab-button--vertical.wux-fab-button--bottomLeft .wux-fab-button__label,.wux-fab-button--vertical.wux-fab-button--topLeft .wux-fab-button__label{left:120rpx}.wux-fab-button--vertical.wux-fab-button--bottomRight .wux-fab-button__label,.wux-fab-button--vertical.wux-fab-button--center .wux-fab-button__label,.wux-fab-button--vertical.wux-fab-button--topRight .wux-fab-button__label{right:120rpx}.wux-fab-button__action{width:100rpx;height:100rpx;border-radius:50%;z-index:1020;background-color:#33cd5f;color:#fff;overflow:visible;transition-duration:.3s;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;box-shadow:0 0 8rpx rgba(0,0,0,.14),0 8rpx 16rpx rgba(0,0,0,.28);right:0;bottom:0;position:relative}.wux-fab-button__action--hover{transition-duration:0s;opacity:.8!important}.wux-fab-button__action--hide-shadow{box-shadow:none!important}.wux-fab-button__icon{display:inline-block;width:40rpx;height:40rpx;font-size:40rpx;line-height:1}.wux-fab-button__text{display:inline-block;width:40rpx;height:40rpx;font-size:40rpx;line-height:1;transition:transform 150ms cubic-bezier(.4,0,1,1)}.wux-fab-button__text--rotate{transform:scale(1) rotate(135deg)}.wux-fab-button__button{padding:0;margin:0;border-radius:0;color:inherit!important;background:0 0!important;font-size:inherit;font-weight:400;line-height:inherit;text-align:inherit;text-decoration:none;min-height:0!important;width:auto!important;box-sizing:border-box;-webkit-tap-highlight-color:transparent;color:#fff!important;border-radius:50%;overflow:visible;background-color:#33cd5f!important;transition-duration:.3s;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;box-shadow:0 0 8rpx rgba(0,0,0,.14),0 8rpx 16rpx rgba(0,0,0,.28);position:absolute;top:0;left:0;opacity:0;z-index:2;width:100%!important;height:100%}.wux-fab-button__button::after{display:block;position:static;top:auto;left:auto;width:auto;height:auto;border:none;border-radius:0;transform:none;transform-origin:0 0}.wux-fab-button__button--hover{transition-duration:0s;opacity:.8!important}.wux-fab-button__button--disabled{opacity:.3!important}.wux-fab-button__button--hide-shadow{box-shadow:none!important}.wux-fab-button__label{position:absolute;top:50%;padding:8rpx 20rpx;font-size:24rpx;background:rgba(0,0,0,.4);border-radius:8rpx;color:rgba(255,255,255,.85);pointer-events:none;white-space:nowrap;opacity:0;box-sizing:border-box;transform:translate3d(0,-50%,0);transition:all .3s}.wux-fab-button--vertical.wux-fab-button--opened .wux-fab-button__label{opacity:1}.wux-fab-button__backdrop{position:fixed;z-index:1000;top:0;right:0;left:0;bottom:0;background:0 0}.wux-fab-button--light .wux-fab-button__action,.wux-fab-button--light .wux-fab-button__button,.wux-fab-button--light .wux-fab-button__button--disabled{background-color:#ddd!important}.wux-fab-button--stable .wux-fab-button__action,.wux-fab-button--stable .wux-fab-button__button,.wux-fab-button--stable .wux-fab-button__button--disabled{background-color:#b2b2b2!important}.wux-fab-button--positive .wux-fab-button__action,.wux-fab-button--positive .wux-fab-button__button,.wux-fab-button--positive .wux-fab-button__button--disabled{background-color:#387ef5!important}.wux-fab-button--calm .wux-fab-button__action,.wux-fab-button--calm .wux-fab-button__button,.wux-fab-button--calm .wux-fab-button__button--disabled{background-color:#11c1f3!important}.wux-fab-button--assertive .wux-fab-button__action,.wux-fab-button--assertive .wux-fab-button__button,.wux-fab-button--assertive .wux-fab-button__button--disabled{background-color:#ef473a!important}.wux-fab-button--balanced .wux-fab-button__action,.wux-fab-button--balanced .wux-fab-button__button,.wux-fab-button--balanced .wux-fab-button__button--disabled{background-color:#33cd5f!important}.wux-fab-button--energized .wux-fab-button__action,.wux-fab-button--energized .wux-fab-button__button,.wux-fab-button--energized .wux-fab-button__button--disabled{background-color:#ffc900!important}.wux-fab-button--royal .wux-fab-button__action,.wux-fab-button--royal .wux-fab-button__button,.wux-fab-button--royal .wux-fab-button__button--disabled{background-color:#886aea!important}.wux-fab-button--dark .wux-fab-button__action,.wux-fab-button--dark .wux-fab-button__button,.wux-fab-button--dark .wux-fab-button__button--disabled{background-color:#444!important}
</style>